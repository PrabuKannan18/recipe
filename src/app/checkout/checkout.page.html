<app-header></app-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-title class="ion-text-center" color="secondary"><strong>Checkout</strong></ion-title>
    </ion-card-header>

    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-input color="dark" label="Full name" labelPlacement="floating" [(ngModel)]="user.name" required></ion-input>
        </ion-item>
        <ion-item>
          <ion-input color="dark" label="Phone number" labelPlacement="floating"[(ngModel)]="user.phone" required></ion-input>
        </ion-item>
        <ion-item>
          <ion-input color="dark" label="Address" labelPlacement="floating" [(ngModel)]="user.address" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Payment method</ion-label>
          <ion-select 
            placeholder="Select payment" 
            [(ngModel)]="user.paymentmethod " 
            (ionChange)="onPaymentMethodChange($event)" required>
            <ion-select-option value="card">Debit/Credit card</ion-select-option>
            <ion-select-option value="upi">UPI</ion-select-option>
            <ion-select-option value="netbanking">Net banking</ion-select-option>
            <ion-select-option value="wallets">Digital wallets</ion-select-option>
            <ion-select-option value="emi">EMI</ion-select-option>
            <ion-select-option value="cod">Cash on delivery</ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Conditional Card Details (Shown if 'Debit/Credit card' selected) -->
        <ng-container *ngIf="user.paymentmethod === 'card'">
          <ion-item>
            <ion-input 
              color="dark" 
              label="Card number" 
              labelPlacement="floating" 
              type="number" 
              [(ngModel)]="user.cardnumber" 
              required>
            </ion-input>
          </ion-item>
          <ion-item>
            <ion-input 
              color="dark" 
              label="Expiry date" 
              labelPlacement="floating" 
              placeholder="MM/YY" 
              [(ngModel)]="user.expiry" 
              required>
            </ion-input>
          </ion-item>
          <ion-item>
            <ion-input 
              color="dark" 
              label="CVV" 
              labelPlacement="floating" 
              type="password" 
              [(ngModel)]="user.cvv" 
              required>
            </ion-input>
          </ion-item>
        </ng-container>

        <ion-item lines="none">
          <ion-label><strong>Total amount: </strong><ion-text class="ion-padding-start"   ><strong>$ {{totalAmount}}</strong></ion-text></ion-label>
        </ion-item>

        <ion-row>
          <ion-col class="ion-text-center">
            <ion-button color="primary" shape="round" (click)="payNow()">
              <ion-icon name="checkmark-done-outline"></ion-icon>
              Pay now</ion-button>
          </ion-col>
        </ion-row>
          <ion-row >
            <ion-col class="ion-text-center" >
            <ion-button  fill="clear" color="secondary" routerLink="/cart">
              <ion-icon name="arrow-back-circle" slot="start" size="large"></ion-icon>
              Back to cart
            </ion-button>
          </ion-col>
        </ion-row>

      </ion-list>
    </ion-card-content>
  </ion-card>
  <app-footer></app-footer>
</ion-content>